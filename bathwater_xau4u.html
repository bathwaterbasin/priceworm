<!DOCTYPE html>
<html>
<head>
    <title>NOF1 Alpha Arena Tracker</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            margin: 0;
        }
        pre {
            background: #0a0a0a;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        h1 {
            color: #00ff00;
            margin-bottom: 10px;
        }
        .loading {
            color: #ffff00;
        }
    </style>
</head>
<body>
    <h1>ğŸ¤– NOF1.AI ALPHA ARENA</h1>
    <pre id="output" class="loading">Loading data...</pre>
    
    <script>
        const HYPERLIQUID_API = "https://api.hyperliquid.xyz";
        
        const MODELS = {
            "DeepSeek": "0xc20ac4dc4188660cbf555448af52694ca62b0734",
            "Grok-4": "0x56d652e62998251b56c8398fb11fcfe464c08f84",
            "Claude": "0x59fa085d106541a834017b97060bcbbb0aa82869",
            "GPT-5": "0x67293d914eafb26878534571add81f6bd2d9fe06",
            "Gemini": "0x1b7a7d099a670256207a30dd0ae13d35f278010f",
            "Qwen3": "0x7a8fd8bba33e37361ca6b0cb4518a44681bad2f3"
        };
        
        async function getAccountData(walletAddress) {
            try {
                const response = await fetch(`${HYPERLIQUID_API}/info`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ type: "clearinghouseState", user: walletAddress })
                });
                return await response.json();
            } catch (e) {
                return null;
            }
        }
        
        async function getUserFills(walletAddress) {
            try {
                const response = await fetch(`${HYPERLIQUID_API}/info`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ type: "userFills", user: walletAddress })
                });
                return await response.json();
            } catch (e) {
                return null;
            }
        }
        
        function calculateRealizedPnl(fills) {
            if (!fills || !Array.isArray(fills)) return 0.0;
            let realizedPnl = 0.0;
            fills.forEach(fill => {
                if (fill.closedPnl) {
                    realizedPnl += parseFloat(fill.closedPnl);
                }
            });
            return realizedPnl;
        }
        
        function calculateUnrealizedPnl(accountData) {
            if (!accountData || !accountData.assetPositions) return 0.0;
            let unrealizedPnl = 0.0;
            accountData.assetPositions.forEach(pos => {
                if (pos.unrealizedPnl) {
                    unrealizedPnl += parseFloat(pos.unrealizedPnl);
                }
            });
            return unrealizedPnl;
        }
        
        function getAccountValue(accountData) {
            if (!accountData) return 0.0;
            if (accountData.accountValue) return parseFloat(accountData.accountValue);
            if (accountData.crossMarginSummary && accountData.crossMarginSummary.accountValue) {
                return parseFloat(accountData.crossMarginSummary.accountValue);
            }
            return 0.0;
        }
        
        async function main() {
            let output = "\n" + "=".repeat(90) + "\n";
            output += "ğŸ¤–  NOF1.AI ALPHA ARENA\n";
            output += "=".repeat(90) + "\n";
            output += `â°  ${new Date().toISOString()}\n\n`;
            
            let results = {};
            
            for (const [modelName, address] of Object.entries(MODELS)) {
                const accountData = await getAccountData(address);
                const fills = await getUserFills(address);
                
                const realizedPnl = calculateRealizedPnl(fills);
                const unrealizedPnl = calculateUnrealizedPnl(accountData);
                const accountValue = getAccountValue(accountData);
                const cashOutValue = accountValue;
                const returnPct = (cashOutValue - 10000) / 10000 * 100;
                
                const numTrades = fills && Array.isArray(fills) ? fills.length : 0;
                
                results[modelName] = {
                    realized_pnl: realizedPnl,
                    unrealized_pnl: unrealizedPnl,
                    return_pct: returnPct,
                    cash_out_value: cashOutValue,
                    num_trades: numTrades
                };
            }
            
            // Display leaderboard
            output += "=".repeat(90) + "\n";
            output += "ğŸ“Š LEADERBOARD\n";
            output += "=".repeat(90) + "\n";
            output += "Rank   Model        Cash Out         Return   Trades\n";
            output += "-".repeat(90) + "\n";
            
            const sortedResults = Object.entries(results).sort((a, b) => b[1].cash_out_value - a[1].cash_out_value);
            const rankEmojis = ["ğŸ¥‡", "ğŸ¥ˆ", "ğŸ¥‰", "4ï¸âƒ£", "5ï¸âƒ£", "6ï¸âƒ£"];
            
            sortedResults.forEach((entry, rank) => {
                const [modelName, data] = entry;
                const returnPct = data.return_pct;
                const cashOutValue = data.cash_out_value;
                const numTrades = data.num_trades;
                
                const rankEmoji = rankEmojis[rank] || "â“";
                let trend = "ğŸ“ˆ";
                if (returnPct <= 10 && returnPct > 0) trend = "ğŸ“—";
                else if (returnPct <= 0 && returnPct > -20) trend = "ğŸ“˜";
                else if (returnPct <= -20) trend = "ğŸ“‰";
                
                const line = `${rankEmoji}  #${rank + 1}  ${modelName.padEnd(12)} $${cashOutValue.toFixed(0).padStart(9)}  ${returnPct.toFixed(1).padStart(6)}%  ${numTrades.toString().padStart(3)}  ${trend}`;
                output += line + "\n";
            });
            
            output += "=".repeat(90) + "\n";
            
            // Summary
            if (Object.keys(results).length > 0) {
                const totalCombined = Object.values(results).reduce((sum, data) => sum + data.cash_out_value, 0);
                const avgReturn = Object.values(results).reduce((sum, data) => sum + data.return_pct, 0) / Object.values(results).length;
                
                output += `\nğŸ’° Total: $${totalCombined.toFixed(0)} | Avg Return: ${avgReturn.toFixed(1)}%\n\n`;
            }
            
            output += "=".repeat(90) + "\n";
            
            document.getElementById("output").textContent = output;
            document.getElementById("output").classList.remove("loading");
        }
        
        main();
    </script>
</body>
</html>
